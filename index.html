<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Task Manager — Firebase</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="wrap">
  <header>
    <h1>Tasks Assigned — Daily</h1>
    <div class="controls">
      <button class="btn" id="addTaskBtn">+ Add Task</button>
      <button class="btn ghost" id="exportBtn">Export CSV</button>
    </div>
  </header>

  <div class="panel">
    <div class="filters">
      <input type="text" id="searchInput" placeholder="Search tasks or employee..." />
      <select id="statusFilter">
        <option value="">All status</option>
        <option value="Open">Open</option>
        <option value="In-progress">In-progress</option>
        <option value="Waiting client">Waiting client</option>
        <option value="Closed">Closed</option>
      </select>
      <input type="date" id="dateFilter">
      <select id="assignedFilter">
        <option value="">All assignees</option>
      </select>
      <div style="flex: 1;"></div>
      <div class="small muted" id="countLabel">0 tasks</div>
    </div>

    <div class="table-scroll">
      <table id="tasksTable">
        <thead>
          <tr>
            <th>TASK</th>
            <th>ASSIGNED</th>
            <th>CREATED AT</th>
            <th>DEADLINE</th>
            <th>STATUS</th>
            <th>UPLOADS</th>
            <th>ACTIONS</th>
          </tr>
        </thead>
        <tbody id="tasksBody"></tbody>
      </table>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal-back" id="modalBack">
  <div class="modal" role="dialog" aria-modal="true">
    <h3 id="modalTitle">Add Task</h3>

    <div class="field">
      <label for="taskTitle">Task Title</label>
      <input id="taskTitle" type="text" placeholder="Short description (required)">
    </div>

    <div class="field">
      <label for="taskDetails">Details</label>
      <textarea id="taskDetails" placeholder="More information (optional)"></textarea>
    </div>

    <div class="row-3">
      <div class="field">
        <label for="assignTo">Assigned To</label>
        <div class="inline-add">
          <select id="assignTo"></select>
          <input id="newAssignee" type="text" placeholder="Add name">
          <button class="btn small" id="addAssigneeBtn" title="Add person">Add</button>
        </div>
      </div>

      <div class="field">
        <label for="deadline">Deadline</label>
        <input type="date" id="deadline">
      </div>

      <div class="field">
        <label for="statusSelect">Status</label>
        <select id="statusSelect">
          <option>Open</option>
          <option>In-progress</option>
          <option>Waiting client</option>
          <option>Closed</option>
        </select>
      </div>
    </div>

    <!-- Uploads section -->
    <div class="field">
      <label>Attachments (PDF, images, DOCX) — max 5MB each</label>
      <div class="upload-row">
        <input id="fileInput" type="file" accept=".pdf,image/*,.docx" multiple>
        <div class="link-add">
          <input id="addLinkInput" type="url" placeholder="Paste external link (https://...)" />
          <input id="addLinkLabel" type="text" placeholder="Label (optional)" />
          <button class="btn small" id="addLinkBtn">Add link</button>
        </div>
      </div>
      <div id="attachmentsList" class="attachments-list"></div>
    </div>

    <div class="modal-actions">
      <button class="btn ghost" id="cancelModal">Cancel</button>
      <button class="btn" id="saveTaskBtn">Save</button>
    </div>
  </div>
</div>

<!-- Firebase modular SDK (v12) -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-analytics.js";

  // ====== YOUR FIREBASE CONFIG (already pasted by you) ======
  const firebaseConfig = {
    apiKey: "AIzaSyAeFHwPjA2oS5m7Y5vU7VR8-rE4YOIlSdg",
    authDomain: "taskmanager-bot.firebaseapp.com",
    projectId: "taskmanager-bot",
    storageBucket: "taskmanager-bot.firebasestorage.app",
    messagingSenderId: "504791278240",
    appId: "1:504791278240:web:0cdf192e4416e45f27dfc5",
    measurementId: "G-EF8XPZ8C55"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  try { getAnalytics(app); } catch(e){ /* analytics may fail in Codespaces/localhost */ }

  // Expose initialized app to the module script below via window
  window.__FIREBASE_APP__ = app;
</script>

<!-- Your app logic (module) -->
<script type="module" src="firebase-script.js"></script>

</body>
</html>
